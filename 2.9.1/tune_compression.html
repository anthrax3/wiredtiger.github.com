<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>WiredTiger: Compression</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="wiredtiger.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://wiredtiger.com/"><img alt="Logo" src="LogoFinal-header.png" alt="WiredTiger" /></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber">Version 2.9.1</span>
   </div>
   <div id="projectbrief"><!-- 2.9.1 --></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="banner">
  <a href="https://github.com/wiredtiger/wiredtiger">Fork me on GitHub</a>
  <a class="last" href="http://groups.google.com/group/wiredtiger-users">Join my user group</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tune_compression.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Compression </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>WiredTiger includes a number of optional compression techniques. Configuring compression generally decreases on-disk and in-memory resource requirements and the amount of I/O, and increases CPU cost when data are read and written.</p>
<p>Configuring compression may change application throughput. For example, in applications using solid-state drives (where I/O is less expensive), turning off compression may increase application performance by reducing CPU costs; in applications where I/O costs are more expensive, turning on compression may increase application performance by reducing the overall number of I/O operations.</p>
<p>An example of turning on row-store key prefix compression:</p>
<div class="fragment"><div class="line">        ret = session-&gt;create(session, <span class="stringliteral">&quot;table:mytable&quot;</span>,</div><div class="line">            <span class="stringliteral">&quot;key_format=S,value_format=S,prefix_compression=true&quot;</span>);</div></div><!-- fragment --><p> An example of turning on row-store or column-store dictionary compression:</p>
<div class="fragment"><div class="line">        ret = session-&gt;create(session, <span class="stringliteral">&quot;table:mytable&quot;</span>,</div><div class="line">            <span class="stringliteral">&quot;key_format=S,value_format=S,dictionary=1000&quot;</span>);</div></div><!-- fragment --> <h1><a class="anchor" id="compression_formats"></a>
Block Compression Formats</h1>
<p>WiredTiger provides two methods of compressing your data when using block compression: the raw and noraw methods. These methods change how WiredTiger works to fit data into the blocks that are stored on disk.</p>
<h2><a class="anchor" id="noraw_compression"></a>
Noraw Compression</h2>
<p>Noraw compression is the traditional compression model where a fixed amount of data is given to the compression system, then turned into a compressed block of data. The amount of data chosen to compress is the data needed to fill the uncompressed block. Thus when compressed, the block will be smaller than the normal data size and the sizes written to disk will often vary depending on how compressible the data being stored is. Algorithms using noraw compression include zlib-noraw, lz4-noraw and snappy.</p>
<h2><a class="anchor" id="raw_compression"></a>
Raw Compression</h2>
<p>WiredTiger's raw compression takes advantage of compressors that provide a streaming compression API. Using the streaming API WiredTiger will try to fit as much data as possible into one block. This means that blocks created with raw compression should be of similar size. Using a streaming compression method should also make for less overhead in compression, as the setup and initial work for compressing is done fewer times compared to the amount of data stored. Algorithms using raw compression include zlib, lz4.</p>
<h2><a class="anchor" id="to_raw_or_noraw"></a>
Choosing between Raw and Noraw Compression</h2>
<p>When looking at which compression method to use the biggest consideration is that raw compression will normally provide higher compression levels while using more CPU for compression.</p>
<p>An additional consideration is that raw compression may provide a performance advantage in workloads where data is accessed sequentially. That is because more data is generally packed into each block on disk. Conversely, noraw compression may perform better for workloads with random access patterns because each block will tend to be smaller and require less work to read and decompress.</p>
<p>See <a class="el" href="file_formats.html#file_formats_compression">File formats and compression</a> for more information on available compression techniques.</p>
<p>See <a class="el" href="compression.html">Compressors</a> for information on how to configure and enable compression. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Reference Guide</a></li><li class="navelem"><a class="el" href="programming_lang_java.html">Writing WiredTiger applications  in Java</a></li>
    <li class="footer">Copyright (c) 2008-2016 MongoDB, Inc.  All rights reserved.  Contact <a href="mailto:info@wiredtiger.com">info@wiredtiger.com</a> for more information.</li>
  </ul>
</div>
</body>
</html>
