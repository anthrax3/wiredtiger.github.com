<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>WiredTiger: Upgrading WiredTiger applications</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="wiredtiger.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://wiredtiger.com/"><img alt="Logo" src="LogoFinal-header.png" alt="WiredTiger" /></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber">Version 2.1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="banner">
  <a href="https://github.com/wiredtiger/wiredtiger">Fork me on GitHub</a>
  <a class="last" href="http://groups.google.com/group/wiredtiger-users">Join my user group</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li><a href="community.html"><span>Community</span></a></li>
      <li><a href="license.html"><span>License</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('upgrading.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Upgrading WiredTiger applications </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="version_212"></a>
Upgrading to Version 2.1.2</h1>
<dl>
<dt><a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> shared_cache configuration changes </dt>
<dd><p class="startdd">In the 2.1.2 release of WiredTiger the <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> <code>shared_cache</code> configuration option group have changed. The option that was named <code>enable</code> is no longer available. To enable a <code>shared_cache</code> it is compulsory to name the pool being shared. We are now also enforcing that only one of <code>cache_size</code> and <code>shared_cache</code> are specified in the <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> configuration string. </p>
<p class="enddd"></p>
</dd>
</dl>
<h1><a class="anchor" id="version_211"></a>
Upgrading to Version 2.1.1</h1>
<dl>
<dt>WT_EXTENSION_API::config methods </dt>
<dd><p class="startdd">In the 2.1.1 release of WiredTiger the configuration string parsing API has been changed and added to a new public handle. The WT_EXTENSION_API::config_strget, WT_EXTENSION_API::config_scan_begin, WT_EXTENSION_API::config_scan_next and WT_EXTENSION_API::config_scan_end have been removed. They have been replaced by a <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html#a31922e792668c912bfe45d9745e74d4e" title="Create a handle that can be used to parse or create configuration strings compatible with WiredTiger ...">WT_EXTENSION_API::config_parser_open</a> method, which can be used to parse configuration strings. See the <a class="el" href="struct_w_t___c_o_n_f_i_g___p_a_r_s_e_r.html" title="A handle that can be used to search and traverse configuration strings compatible with WiredTiger API...">WT_CONFIG_PARSER</a> documentation for examples on how to use the updated API. </p>
<p class="enddd"></p>
</dd>
</dl>
<h1><a class="anchor" id="version_21"></a>
Upgrading to Version 2.1</h1>
<dl>
<dt><a class="el" href="group__wt.html#abd8b1299dfb5c54dc049fa42a4680b55" title="The number of bytes in the data item.">WT_ITEM::size</a> type </dt>
<dd><p class="startdd">In the 2.1 release of WiredTiger <a class="el" href="group__wt.html#abd8b1299dfb5c54dc049fa42a4680b55" title="The number of bytes in the data item.">WT_ITEM::size</a> type has changed from <code>uint32_t</code> to <code>size_t</code>. Applications may require modifications to resolve compile-time errors. </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___c_o_m_p_r_e_s_s_o_r.html#a44483644eddbedd07f34e31c5beaf6b5" title="Callback to compress a list of byte strings.">WT_COMPRESSOR::compress_raw</a> signature </dt>
<dd><p class="startdd">In the 2.1 release of WiredTiger, the behavior of the compress_raw callback has changed so that it will only be retried if it returns <code>EAGAIN</code>. If it returns zero and sets <code>result_slots</code> to zero, WiredTiger will assume that raw compression has failed and will fall back to calling <a class="el" href="struct_w_t___c_o_m_p_r_e_s_s_o_r.html#a87c339a3442b719896fa5cbe2c530843" title="Callback to compress a chunk of data.">WT_COMPRESSOR::compress</a>. </p>
<p class="enddd"></p>
</dd>
<dt>Transaction sync default setting </dt>
<dd><p class="startdd">In the 2.1 release of WiredTiger the <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> <code>transaction_sync</code> configuration setting default value has changed from "dsync" to "fsync". This is due to enhancements to the group commit implementation in WiredTiger - which mean that greater throughput can be achieved with explicit "fsync" calls than by enabling "dsync" on a file handle. Applications that don't execute concurrent transactions may see better throughput with transaction_sync set to "dsync". </p>
<p class="enddd"></p>
</dd>
</dl>
<h1><a class="anchor" id="version_20"></a>
Upgrading to Version 2.0</h1>
<dl>
<dt>File format changes </dt>
<dd><p class="startdd">The underlying file format is unchanged in 2.0 </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a358ca4141d59c345f401c58501276bbb" title="Create a table, column group, index or file.">WT_SESSION::create</a> LSM configuration options </dt>
<dd><p class="startdd">In the 2.0 release of WiredTiger the LSM configuration options have been collected into a configuration option subgroup. All configuration options to <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a358ca4141d59c345f401c58501276bbb" title="Create a table, column group, index or file.">WT_SESSION::create</a> that previously had a prefix of <code>lsm_</code> now belong to the <code>lsm</code> configuration group. If you are explicitly configuring any of the following options, you should review the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a358ca4141d59c345f401c58501276bbb" title="Create a table, column group, index or file.">WT_SESSION::create</a> documentation for details of the updated syntax: lsm_auto_throttle, lsm_bloom, lsm_bloom_config, lsm_bloom_bit_count, lsm_bloom_hash_count, lsm_bloom_oldest, lsm_chunk_max, lsm_chunk_size, lsm_merge_max and lsm_merge_threads. </p>
<p class="enddd"></p>
</dd>
</dl>
<h1><a class="anchor" id="version_166"></a>
Upgrading to Version 1.6.6</h1>
<dl>
<dt>File format changes </dt>
<dd><p class="startdd">The underlying file formats changed in the 1.6.6 release; tables and files should be dumped and re-loaded into a new database. </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#aafa7a12a4891a5bfdc98673a5b8f9c69" title="Compact a live row- or column-store btree (log-structured merge trees cannot be compacted).">WT_SESSION::compact</a> trigger configuration </dt>
<dd><p class="startdd">In previous releases, the <code>trigger</code> configuration string to the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#aafa7a12a4891a5bfdc98673a5b8f9c69" title="Compact a live row- or column-store btree (log-structured merge trees cannot be compacted).">WT_SESSION::compact</a> method specified a requirement to initiate compaction; in the 1.6.6 release, this configuration string has been removed, and compaction will be attempted if it seems likely at least 10% of the file can be recovered. Applications may require modifications to resolve run-time errors. </p>
<p class="enddd"></p>
</dd>
<dt>Statistics configuration </dt>
<dd><p class="startdd">In previous releases, the <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> function took a <code>statistics</code> configuration, which defaulted to false; when set to true, additional, generally performance-expensive statistics were maintained by the database, above and beyond a default set of statistics. In version 1.6.6, the <code>statistics</code> configuration is a list which may be set to "all", "fast" or "none". When set to "none", no statistics are maintained by the database; when set to "fast", only relatively performance-inexpensive statistics are maintained, and when set to "all", all statistics are maintained, regardless of cost.</p>
<p>In previous releases, the <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> function took a <code>statistics_log</code> configuration which logged the performance-inexpensive database statistics to a file. In version 1.6.6, the <code>statistics_log</code> configuration logs whatever statistics are configured for the database. If the database is configured with <code>statistics</code> to "none", no statistics will be logged to the file; if the database is configured with "all" or "fast", the corresponding statistics will be logged to the file.</p>
<p>In previous releases, the WT_SESSION::cursor method took <code>statistics_clear</code> and a <code>statistics_fast</code> configurations. The <code>statistics_clear</code> configuration defaulted to false; when set to true, statistics counters were reset after they were gathered by the cursor. The <code>statistics_fast</code> configuration defaulted to true; when set to true, the cursor only gathered performance-inexpensive statistics for the cursor, and when set to false, the cursor gathered all available statistics, regardless of cost.</p>
<p>In version 1.6.6, these two configuration booleans have been replaced with a new configuration list <code>statistics</code>, which may be set from the values "clear", "fast" and "all". When "fast" is configured, only relatively performance-inexpensive statistics are gathered, and when "all" is configured, all statistics are gathered, regardless of cost. When "clear" is configured, statistics counters are reset after they are gathered.</p>
<p>Additionally, in version 1.6.6, statistics cursors must be configured to agree with the database statistics configuration; when the database statistics are configured to "none", attempts to open a statistics cursor will fail; when the database statistics are configured to "fast", a statistics cursor must also be configured to "fast"; when the database statistics are configured to "all", a statistics cursor may be configured to either "fast" or "all". Opening a statistics cursor without configuring either "fast" or "all" will configure the cursor to be the same as the current database configuration.</p>
<p>Applications may require modifications to resolve run-time errors; application statistics configuration and cursors should be reviewed to confirm they are configured for the desired behavior; </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___e_v_e_n_t___h_a_n_d_l_e_r.html" title="The interface implemented by applications to handle error, informational and progress messages...">WT_EVENT_HANDLER</a> interface changes </dt>
<dd><p class="startdd">Add a new <a class="el" href="struct_w_t___e_v_e_n_t___h_a_n_d_l_e_r.html#a97c41f95e363a2a7aa9a9739be4d9ac8" title="Callback to handle automatic close of a WiredTiger handle.">WT_EVENT_HANDLER::handle_close</a> callback that WiredTiger will call any time it automatically closes an application session or cursor handle.</p>
<p>Additionally add a <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html" title="All data operations are performed in the context of a WT_SESSION.">WT_SESSION</a> parameter into the existing <a class="el" href="struct_w_t___e_v_e_n_t___h_a_n_d_l_e_r.html#af26a6817fcc22499496c15b47c0ef788" title="Callback to handle error messages; by default, error messages are written to the stderr stream...">WT_EVENT_HANDLER::handle_error</a>, <a class="el" href="struct_w_t___e_v_e_n_t___h_a_n_d_l_e_r.html#a4b8a4d66d1e4ae5c1e4a87b2eda618d9" title="Callback to handle informational messages; by default, informational messages are written to the stdo...">WT_EVENT_HANDLER::handle_message</a> and <a class="el" href="struct_w_t___e_v_e_n_t___h_a_n_d_l_e_r.html#a14a2a760c981563efb02555c0d0b267d" title="Callback to handle progress messages; by default, no progress messages are written.">WT_EVENT_HANDLER::handle_progress</a> callback functions. </p>
<p class="enddd"></p>
</dd>
</dl>
<h1><a class="anchor" id="version_165"></a>
Upgrading to Version 1.6.5</h1>
<dl>
<dt><a class="el" href="struct_w_t___c_u_r_s_o_r.html#aac90d9fbcc031570f924db55f8a1cee3" title="Insert a record and optionally update an existing record.">WT_CURSOR::insert</a> behavior </dt>
<dd><p class="startdd">In previous releases, the <a class="el" href="struct_w_t___c_u_r_s_o_r.html#aac90d9fbcc031570f924db55f8a1cee3" title="Insert a record and optionally update an existing record.">WT_CURSOR::insert</a> ended positioned at the inserted record. To minimize the cursor resources held by applications inserting many records, the <a class="el" href="struct_w_t___c_u_r_s_o_r.html#aac90d9fbcc031570f924db55f8a1cee3" title="Insert a record and optionally update an existing record.">WT_CURSOR::insert</a> method has been changed to end without any position. Application insert cursors should be reviewed to confirm they do not attempt to iterate after an insert. </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#afb5b4a69c2c5cafe411b2b04fdc1c75d" title="Open a new cursor on a data source or duplicate an existing cursor.">WT_SESSION::open_cursor</a> statistics_fast configuration </dt>
<dd><p class="startdd">In previous releases, the default <code>statistics_fast</code> configuration to the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#afb5b4a69c2c5cafe411b2b04fdc1c75d" title="Open a new cursor on a data source or duplicate an existing cursor.">WT_SESSION::open_cursor</a> method was <code>false</code>; in the 1.6.5 release, the default statistics_fast configuration is <code>true</code>. Applications opening statistics cursors should be reviewed to confirm they have the correct behavior. </p>
<p class="enddd"></p>
</dd>
<dt>Synchronous checkpoint configuration </dt>
<dd><p class="startdd">The <code>sync</code> configuration key to <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> has been renamed <code>checkpoint_sync</code>. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_164"></a>
Upgrading to Version 1.6.4</h1>
<dl>
<dt>File format changes </dt>
<dd><p class="startdd">The underlying file formats changed in the 1.6.4 release; tables and files should be dumped and re-loaded into a new database. </p>
<p class="enddd"></p>
</dd>
<dt>wt utility load command </dt>
<dd><p class="startdd">The default behavior of the <code>wt</code> utility's <code>load</code> command has been changed to overwrite existing data, by default, and the <code>-o</code> flag to the <code>load</code> command (overwrite existing data) has been replaced with the <code>-n</code> flag (do not overwrite existing data). Applications requiring the previous default behavior of not overwriting existing data should add the <code>-n</code> option to their command line configuration; applications previously using the <code>-o</code> option on their command line configurations should remove it. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_163"></a>
Upgrading to Version 1.6.3</h1>
<dl>
<dt>Cursor overwrite configuration </dt>
<dd><p class="startdd">In previous releases, the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#afb5b4a69c2c5cafe411b2b04fdc1c75d" title="Open a new cursor on a data source or duplicate an existing cursor.">WT_SESSION::open_cursor</a> <code>overwrite</code> configuration string behaved inconsistently across Btree and LSM data sources. In Btree, <code>overwrite</code> was <code>false</code> by default and was limited to the <a class="el" href="struct_w_t___c_u_r_s_o_r.html#aac90d9fbcc031570f924db55f8a1cee3" title="Insert a record and optionally update an existing record.">WT_CURSOR::insert</a> method, changing an insert to succeed regardless of whether or not the record previously existed. In LSM trees, <code>overwrite</code> was <code>true</code> by default, and applied to the <a class="el" href="struct_w_t___c_u_r_s_o_r.html#aac90d9fbcc031570f924db55f8a1cee3" title="Insert a record and optionally update an existing record.">WT_CURSOR::insert</a>, <a class="el" href="struct_w_t___c_u_r_s_o_r.html#abbba24fe607fee519c4c9c4669cd4455" title="Remove a record.">WT_CURSOR::remove</a> and <a class="el" href="struct_w_t___c_u_r_s_o_r.html#a444cdc0952e7f8d55d23173516c7037f" title="Update a record and optionally insert an existing record.">WT_CURSOR::update</a> methods, configuring all three methods to ignore the existing state of the record.</p>
<p>In the 1.6.3 release, the <code>overwrite</code> configuration is consistent across both Btree and LSM tree data sources. For performance reasons, the default is the behavior previously described for LSM trees: in other words, <code>overwrite</code> is <code>true</code> by default, causing <a class="el" href="struct_w_t___c_u_r_s_o_r.html#aac90d9fbcc031570f924db55f8a1cee3" title="Insert a record and optionally update an existing record.">WT_CURSOR::insert</a>, <a class="el" href="struct_w_t___c_u_r_s_o_r.html#abbba24fe607fee519c4c9c4669cd4455" title="Remove a record.">WT_CURSOR::remove</a> and <a class="el" href="struct_w_t___c_u_r_s_o_r.html#a444cdc0952e7f8d55d23173516c7037f" title="Update a record and optionally insert an existing record.">WT_CURSOR::update</a> to ignore the current state of the record, and these methods will succeed regardless of whether or not the record previously exists. When an application configures <code>overwrite</code> to <code>false</code>, <a class="el" href="struct_w_t___c_u_r_s_o_r.html#aac90d9fbcc031570f924db55f8a1cee3" title="Insert a record and optionally update an existing record.">WT_CURSOR::insert</a> will fail with <a class="el" href="group__wt.html#gaeca1f3c4a70b8b71b56d2c2fc99a469c" title="Attempt to insert an existing key.">WT_DUPLICATE_KEY</a> if the record previously exists, and <a class="el" href="struct_w_t___c_u_r_s_o_r.html#a444cdc0952e7f8d55d23173516c7037f" title="Update a record and optionally insert an existing record.">WT_CURSOR::update</a> and <a class="el" href="struct_w_t___c_u_r_s_o_r.html#abbba24fe607fee519c4c9c4669cd4455" title="Remove a record.">WT_CURSOR::remove</a> will fail with <a class="el" href="group__wt.html#ga3c9e1b494d95cf34404ab7a974af6bf8" title="Item not found.">WT_NOTFOUND</a> if the record does not previously exist.</p>
<p><b>This is a potentially serious API change that will not be detected by compilation.</b> Application cursors should be reviewed to confirm they are configured for the desired behavior. </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> no longer accepts a <code>transactional</code> configuration </dt>
<dd><p class="startdd">The <code>transactional</code> configuration key has been removed from <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a>. Any application setting it should simply remove it, no change in application behavior is needed. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_162"></a>
Upgrading to Version 1.6.2</h1>
<dl>
<dt>Table of WiredTiger extension methods </dt>
<dd><p class="startdd">New functionality was added to the list of WiredTiger extension methods; applications using the extension methods will require recompilation. </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a358ca4141d59c345f401c58501276bbb" title="Create a table, column group, index or file.">WT_SESSION::create</a> no longer accepts a "source" configuration </dt>
<dd><p class="startdd">The <code>"source"</code> configuration key has been removed from <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a358ca4141d59c345f401c58501276bbb" title="Create a table, column group, index or file.">WT_SESSION::create</a>. Normal applications should not have been using it, and there were a number of bugs associated with it. </p>
<p class="enddd"></p>
</dd>
<dt>Default checksum configuration </dt>
<dd><p class="startdd">The default file checksum configuration was changed to <code>uncompressed</code>, which means blocks that are compressed will no longer also include a checksum, by default. Applications using compression insufficient for the purposes of corrupted block identification should change their file checksum configuration to <code>on</code>. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_161"></a>
Upgrading to Version 1.6.1</h1>
<dl>
<dt>Default page sizes </dt>
<dd><p class="startdd">In the 1.6.1 release, the default for the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a358ca4141d59c345f401c58501276bbb" title="Create a table, column group, index or file.">WT_SESSION::create</a> configuration string <code>allocation_size</code> changed from 512B to 4KB, and the default for the configuration string <code>internal_page_max</code> changed from 2KB to 4KB. Applications wanting to create files with smaller allocation or internal page sizes will need to set those configuration values explicitly. </p>
<p class="enddd"></p>
</dd>
<dt>Shared cache configuration </dt>
<dd><p class="startdd">In the 1.6.1 release, an explicit shared_cache=(enable=boolean) option was added to the wiredtiger_open configuration options. Existing applications that use shared cache functionality will need to add the enable option to the configuration string. The default value for the option is false. </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___c_o_m_p_r_e_s_s_o_r.html#a44483644eddbedd07f34e31c5beaf6b5" title="Callback to compress a list of byte strings.">WT_COMPRESSOR::compress_raw</a> signature </dt>
<dd><p class="startdd">In the 1.6.1 release, the <code>split_pct</code> argument to the <a class="el" href="struct_w_t___c_o_m_p_r_e_s_s_o_r.html#a44483644eddbedd07f34e31c5beaf6b5" title="Callback to compress a list of byte strings.">WT_COMPRESSOR::compress_raw</a> function changed type from <code>u_int</code> to <code>int</code>, applications may require modification to avoid compiler warnings. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_160"></a>
Upgrading to Version 1.6.0</h1>
<dl>
<dt>File format changes </dt>
<dd><p class="startdd">The underlying file formats changed in the 1.6.0 release; tables and files should be dumped and re-loaded into a new database. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_153"></a>
Upgrading to Version 1.5.3</h1>
<dl>
<dt>Configuration strings </dt>
<dd><p class="startdd">An undocumented feature where configuration string case was ignored has been removed, and all configuration strings are now case-dependent. Applications may require modifications to resolve run-time errors. </p>
<p class="enddd"></p>
</dd>
<dt>Loading extensions and <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html" title="Table of WiredTiger extension methods.">WT_EXTENSION_API</a> </dt>
<dd><p class="startdd">The following changes are only applicable to applications loading extensions and/or using the WiredTiger extension functions described in <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html" title="Table of WiredTiger extension methods.">WT_EXTENSION_API</a>.</p>
<ul>
<li>
<p class="startli">The signature of <a class="el" href="group__wt__ext.html#ga5ed14c916d5dcfe0e81aea9d9ccb7fe3" title="Entry point to an extension, called when the extension is loaded.">wiredtiger_extension_init</a> has changed from <code>(<a class="el" href="struct_w_t___s_e_s_s_i_o_n.html" title="All data operations are performed in the context of a WT_SESSION.">WT_SESSION</a> *session, <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html" title="Table of WiredTiger extension methods.">WT_EXTENSION_API</a> *api)</code> to <code>(<a class="el" href="struct_w_t___c_o_n_n_e_c_t_i_o_n.html" title="A connection to a WiredTiger database.">WT_CONNECTION</a> *connection)</code>. As no <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html" title="Table of WiredTiger extension methods.">WT_EXTENSION_API</a> handle reference is passed to the function, the <a class="el" href="struct_w_t___c_o_n_n_e_c_t_i_o_n.html#a99df5b3a17564eb5b3e4ec076590133d" title="Return a reference to the WiredTiger extension functions.">WT_CONNECTION::get_extension_api</a> has been added to support retrieval of the extension API. Applications may require modifications.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The type of all configuration arguments to extension methods has changed from <code>"const char *"</code> to <code>"WT_CONFIG_ARG *"</code>, and the WT_EXTENSION::config method added to support configuration parsing; applications may require modifications.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The undocumented <code>wiredtiger_XXX</code> defines for <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html" title="Table of WiredTiger extension methods.">WT_EXTENSION_API</a> extension methods have been removed from the <code>wiredtiger_ext.h</code> include file; applications should instead use the method handles referenced by the <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html" title="Table of WiredTiger extension methods.">WT_EXTENSION_API</a> handle to call extension functions.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The extension API methods have all changed to require an additional parameter, the <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html" title="Table of WiredTiger extension methods.">WT_EXTENSION_API</a> method handle; applications may require modifications.</p>
<p class="endli"></p>
</li>
<li>
The WT_SESSION::msg_printf method was replaced by <a class="el" href="struct_w_t___e_x_t_e_n_s_i_o_n___a_p_i.html#a460e65aa13990254a2cd83fe96d4865a" title="Insert a message into the WiredTiger message stream.">WT_EXTENSION_API::msg_printf</a>; applications may require modifications. </li>
</ul>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html" title="Applications can extend WiredTiger by providing new implementations of the WT_DATA_SOURCE class...">WT_DATA_SOURCE</a> </dt>
<dd><p class="startdd">The following changes are only applicable to applications providing new implementations of the WiredTiger <a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html" title="Applications can extend WiredTiger by providing new implementations of the WT_DATA_SOURCE class...">WT_DATA_SOURCE</a> class.</p>
<ul>
<li>
<p class="startli">The <a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html" title="Applications can extend WiredTiger by providing new implementations of the WT_DATA_SOURCE class...">WT_DATA_SOURCE</a> class has three new methods: <a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html#a85e984645fb506a3d28881a26e7f79a0" title="Callback to compact an object.">WT_DATA_SOURCE::compact</a>, <a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html#a14537b1218f8c98462ddcd6df83fd1d1" title="Callback to salvage an object.">WT_DATA_SOURCE::salvage</a>, and <a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html#ad6487a12a6248371e43884cfef7715da" title="Callback to verify an object.">WT_DATA_SOURCE::verify</a>; applications may require modifications to resolve compile errors.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The <code>owner</code> argument to the <a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html#a919c6b21ecaaffdbde671daab0440f71" title="Callback to initialize a cursor.">WT_DATA_SOURCE::open_cursor</a> method has been removed; applications may require modifications to resolve compile errors.</p>
<p class="endli"></p>
</li>
<li>
The <code>exclusive</code> argument to the <a class="el" href="struct_w_t___d_a_t_a___s_o_u_r_c_e.html#aaf5e6a2d9c55c997af107bd4a5fb3a0c" title="Callback to create a new object.">WT_DATA_SOURCE::create</a> method has been removed; applications may require modifications to resolve compile errors. </li>
</ul>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_143"></a>
Upgrading to Version 1.4.3</h1>
<dl>
<dt>Statistics </dt>
<dd><p class="startdd">WiredTiger statistics are no longer maintained by default; to configure statistics, use the <code>statistics</code> configuration string to the <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database.">wiredtiger_open</a> function. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_139"></a>
Upgrading to Version 1.3.9</h1>
<dl>
<dt>Compression </dt>
<dd><p class="startdd">A new member, <a class="el" href="struct_w_t___c_o_m_p_r_e_s_s_o_r.html#a44483644eddbedd07f34e31c5beaf6b5" title="Callback to compress a list of byte strings.">WT_COMPRESSOR::compress_raw</a>, was added to the <a class="el" href="struct_w_t___c_o_m_p_r_e_s_s_o_r.html" title="The interface implemented by applications to provide custom compression.">WT_COMPRESSOR</a> extension API. Applications using the <a class="el" href="struct_w_t___c_o_m_p_r_e_s_s_o_r.html" title="The interface implemented by applications to provide custom compression.">WT_COMPRESSOR</a> extension API should add a NULL as the second field of that structure. </p>
<p class="enddd"></p>
</dd>
<dt>Checksums </dt>
<dd><p class="startdd">The <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a358ca4141d59c345f401c58501276bbb" title="Create a table, column group, index or file.">WT_SESSION::create</a> method's <code>checksum</code> configuration string has been changed from a boolean type to a string type. Applications using the checksum configuration string should change a value of <code>true</code> to the string <code>on</code>, and a value of <code>false</code> to the string <code>off</code> or the string <code>uncompressed</code>. </p>
<p class="enddd"></p>
</dd>
<dt>File format changes </dt>
<dd><p class="startdd">The underlying file formats changed in the 1.3.9 release; tables and files should be dumped and re-loaded into a new database. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_138"></a>
Upgrading to Version 1.3.8</h1>
<dl>
<dt>Statistics keys </dt>
<dd><p class="startdd">The <a class="el" href="group__wt.html#statistics_keys">statistics key constants</a> have been renamed to use all capitals, and use consistent prefixes to distinguish between connection statistics and statistics for data sources. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_136"></a>
Upgrading to Version 1.3.6</h1>
<dl>
<dt>Installed library names </dt>
<dd><p class="startdd">The installed WiredTiger extension library names changed to limit namespace pollution:</p>
<table class="doxtable">
<tr>
<th>Library</th><th>Previous Name</th><th>New Name </th></tr>
<tr>
<td>Bzip2 compression</td><td>bzip2_compress.a</td><td>libwiredtiger_bzip2.a </td></tr>
<tr>
<td></td><td>bzip2_compress.la</td><td>libwiredtiger_bzip2.la </td></tr>
<tr>
<td></td><td>bzip2_compress.so</td><td>libwiredtiger_bzip2.so </td></tr>
<tr>
<td>Snappy compression</td><td>snappy_compress.a</td><td>libwiredtiger_snappy.a </td></tr>
<tr>
<td></td><td>snappy_compress.la</td><td>libwiredtiger_snappy.la </td></tr>
<tr>
<td></td><td>snappy_compress.so</td><td>libwiredtiger_snappy.so </td></tr>
<tr>
<td>No-op compression</td><td>nop_compress.a</td><td>No longer installed </td></tr>
<tr>
<td></td><td>nop_compress.la</td><td>No longer installed </td></tr>
<tr>
<td></td><td>nop_compress.so</td><td>No longer installed </td></tr>
<tr>
<td>Reverse order collator</td><td>reverse_collator.a</td><td>No longer installed </td></tr>
<tr>
<td></td><td>reverse_collator.la</td><td>No longer installed </td></tr>
<tr>
<td></td><td>reverse_collator.so</td><td>No longer installed </td></tr>
</table>
<p class="enddd"></p>
</dd>
<dt>Built-in compression names </dt>
<dd><p class="startdd">The built-in compression name arguments to the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html" title="All data operations are performed in the context of a WT_SESSION.">WT_SESSION</a>:create <code>block_compressor</code> configuration string changed for consistency:</p>
<table class="doxtable">
<tr>
<th>Extension</th><th>Previous Name</th><th>New Name </th></tr>
<tr>
<td>Bzip2 compression</td><td>"bzip2_compress"</td><td>"bzip2" </td></tr>
<tr>
<td>Snappy compression</td><td>"snappy_compress"</td><td>"snappy" </td></tr>
</table>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_135"></a>
Upgrading to Version 1.3.5</h1>
<dl>
<dt>File format changes </dt>
<dd><p class="startdd">The underlying file formats changed in the 1.3.5 release; tables and files should be dumped and re-loaded into a new database. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 <h1><a class="anchor" id="version_13"></a>
Upgrading to Version 1.3</h1>
<dl>
<dt>Checkpoint and Snapshot </dt>
<dd><p class="startdd">The checkpoint functionality supported by <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a6550c9079198955c5071583941c85bbf" title="Write a transactionally consistent snapshot of a database or set of objects.">WT_SESSION::checkpoint</a> and the snapshot functionality supported by WT_SESSION::sync have been merged into a single piece of functionality.</p>
<ul>
<li>
<p class="startli"><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a6550c9079198955c5071583941c85bbf" title="Write a transactionally consistent snapshot of a database or set of objects.">WT_SESSION.checkpoint</a><br/>
 The <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a6550c9079198955c5071583941c85bbf" title="Write a transactionally consistent snapshot of a database or set of objects.">WT_SESSION::checkpoint</a> method's <code>snapshot</code> configuration string has been renamed to <code>name</code>. The name assigned to checkpoints without a specified <code>name</code> configuration is now <code>"WiredTigerCheckpoint"</code>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#adf785ef53c16d9dcc77e22cc04c87b70" title="Drop (delete) an object.">WT_SESSION.drop</a><br/>
 In releases before 1.3, the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#adf785ef53c16d9dcc77e22cc04c87b70" title="Drop (delete) an object.">WT_SESSION::drop</a> method was used to delete snapshots. In 1.3, the functionality of deleting snapshots has been moved to the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a6550c9079198955c5071583941c85bbf" title="Write a transactionally consistent snapshot of a database or set of objects.">WT_SESSION::checkpoint</a> method, specifically, snapshots are discarded using the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a6550c9079198955c5071583941c85bbf" title="Write a transactionally consistent snapshot of a database or set of objects.">WT_SESSION::checkpoint</a> method's <code>drop</code> configuration string.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">WT_SESSION.sync<br/>
 The WT_SESSION::sync method has been removed from the 1.3 release; the functionality of creating an object snapshot has moved to the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a6550c9079198955c5071583941c85bbf" title="Write a transactionally consistent snapshot of a database or set of objects.">WT_SESSION::checkpoint</a> method, specifically, creating a snapshot of a one or more objects is done using the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a6550c9079198955c5071583941c85bbf" title="Write a transactionally consistent snapshot of a database or set of objects.">WT_SESSION::checkpoint</a> method's <code>target</code> configuration string.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">wt drop -s<br/>
 The <code>-s</code> option to the <code>drop</code> command for the <code>wt</code> command line utility has been removed, and object snapshots may no longer be removed from the command line.</p>
<p class="endli"></p>
</li>
<li>
wt dump, list -s<br/>
 The <code>-s</code> options to the <code>dump</code> and <code>list</code> commands for the <code>wt</code> command line utility have been renamed to be <code>-c</code>. </li>
</ul>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#afb5b4a69c2c5cafe411b2b04fdc1c75d" title="Open a new cursor on a data source or duplicate an existing cursor.">WT_SESSION.open_cursor</a> </dt>
<dd><p class="startdd">In releases before 1.3, the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#afb5b4a69c2c5cafe411b2b04fdc1c75d" title="Open a new cursor on a data source or duplicate an existing cursor.">WT_SESSION::open_cursor</a> method could duplicate cursors that were not positioned in an object; in 1.3, a cursor must be positioned in order to be duplicated. </p>
<p class="enddd"></p>
</dd>
<dt>Transactional cursors </dt>
<dd><p class="startdd">In releases before 1.3, ending a transaction by calling the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a712226eca5ade5bd123026c624468fa2" title="Commit the current transaction.">WT_SESSION::commit_transaction</a> or <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#ab45f521464ad9e54d9b15efc2ffe20a1" title="Roll back the current transaction.">WT_SESSION::rollback_transaction</a> methods implicitly closed all open cursors; in 1.3, the cursors remain open, but are reset (discarding their positions and cursor values). This means applications must change to either close cursors explicitly, or rely on an eventual <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a96f25dfa6447034aea1f67ab02ab5698" title="Close the session handle.">WT_SESSION::close</a> or <a class="el" href="struct_w_t___c_o_n_n_e_c_t_i_o_n.html#af535c517df851eeac8ebf3594d40b545" title="Close a connection.">WT_CONNECTION::close</a> methods to implicitly close open cursors. </p>
<p class="enddd"></p>
</dd>
<dt>Default transactional isolation level </dt>
<dd><p class="startdd">In releases before 1.3, the default isolation level for transaction was <code>snapshot</code>, and the default isolation level for non-transaction operations was <code>read-uncommitted</code>; in 1.3, the default isolation level for all operations is <code>read-committed</code>.</p>
<p>The default can be overridden for a session using the <code>isolation</code> setting in WT_CONNECTION::open_cursor. </p>
<p class="enddd"></p>
</dd>
<dt><a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#ac2bad195e24710d52d730fe3a7c1756a" title="Truncate a file, table or cursor range.">WT_SESSION.truncate</a> </dt>
<dd><p class="startdd">In releases before 1.3, the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#ac2bad195e24710d52d730fe3a7c1756a" title="Truncate a file, table or cursor range.">WT_SESSION::truncate</a> method required cursors used for truncation of a cursor range to reference existing keys in the object; in 1.3, the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#ac2bad195e24710d52d730fe3a7c1756a" title="Truncate a file, table or cursor range.">WT_SESSION::truncate</a> method has been changed to allow cursors to reference any valid key in the object's name space so applications may discard portions of the object name space without knowing exactly what records the object contains. </p>
<p class="enddd"></p>
</dd>
<dt>WT_CURSOR.equals </dt>
<dd><p class="startdd">In releases before 1.3, the WT_CURSOR::equals method returned zero/non-zero to indicate cursor equality; in 1.3, the WT_CURSOR::equals method has been replaced with <a class="el" href="struct_w_t___c_u_r_s_o_r.html#acd3f345e375e26d223ad5c6f35dc15e8" title="Return the ordering relationship between two cursors: both cursors must have the same data source and...">WT_CURSOR::compare</a>, which compares two cursors and returns a cursor comparison status (less than 0, equal to 0, or greater than 0) depending on the cursors' key order. </p>
<p class="enddd"></p>
</dd>
<dt>File format changes </dt>
<dd><p class="startdd">The underlying file formats changed in the 1.3 release; tables and files should be dumped and re-loaded into a new database. </p>
<p class="enddd"></p>
</dd>
</dl>
<hr/>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Reference Guide</a></li>
    <li class="footer">Copyright (c) 2008-2014 WiredTiger, Inc.  All rights reserved.  Contact <a href="mailto:info@wiredtiger.com">info@wiredtiger.com</a> for more information.</li>
  </ul>
</div>
</body>
</html>
